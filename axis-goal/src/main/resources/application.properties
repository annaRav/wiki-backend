quarkus.application.name=axis-goal
quarkus.http.port=8081

# Datasource
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST:postgres-app}:${DB_PORT:5432}/${DB_NAME:goal}
quarkus.datasource.username=${DB_USERNAME:goal_user}
quarkus.datasource.password=${DB_PASSWORD:axis_password}
quarkus.datasource.jdbc.max-size=10
quarkus.datasource.jdbc.min-size=5

# Hibernate
quarkus.hibernate-orm.database.generation=validate
quarkus.hibernate-orm.dialect=org.hibernate.dialect.PostgreSQLDialect
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.jdbc.timezone=UTC

# Liquibase
quarkus.liquibase.migrate-at-start=true
quarkus.liquibase.change-log=db/changelog/db.changelog-master.yaml
quarkus.liquibase.default-schema-name=public

# OIDC / Keycloak
quarkus.oidc.auth-server-url=${KEYCLOAK_AUTH_SERVER_URL:http://keycloak:8080/realms/axis}
quarkus.oidc.client-id=axis-backend
quarkus.oidc.credentials.secret=${KEYCLOAK_CLIENT_SECRET:secret}

# Security
quarkus.http.auth.permission.authenticated.paths=/api/*
quarkus.http.auth.permission.authenticated.policy=authenticated
quarkus.http.auth.permission.public.paths=/q/*
quarkus.http.auth.permission.public.policy=permit

# Health probes (match K8s expectations)
quarkus.smallrye-health.root-path=/actuator/health
quarkus.smallrye-health.liveness-path=liveness
quarkus.smallrye-health.readiness-path=readiness

# OpenAPI
quarkus.smallrye-openapi.path=/api-docs
quarkus.swagger-ui.path=/swagger-ui
quarkus.swagger-ui.always-include=true

# Virtual Threads (Java 21+)
quarkus.virtual-threads.enabled=true
quarkus.virtual-threads.name-prefix=vt-axis-goal-

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.axis".level=DEBUG
quarkus.log.category."org.hibernate.SQL".level=DEBUG
quarkus.log.category."org.hibernate.type.descriptor.sql.BasicBinder".level=TRACE

# Container image configuration for Jib
quarkus.container-image.builder=jib
quarkus.container-image.group=axis
quarkus.container-image.name=goal
quarkus.jib.base-jvm-image=eclipse-temurin:21-jre-alpine
quarkus.jib.jvm-arguments=-Xms128m,-Xmx256m
quarkus.jib.ports=8081

# Packaging - default fast-jar
quarkus.native.enabled=false
