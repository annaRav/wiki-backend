apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# PROD overlay: Использует готовые образы из GitHub Container Registry
# Команда: skaffold run -p prod

resources:
  - ../../base

# Один файл с патчами для всех сервисов
patches:
  - path: prod-patches.yaml

# Образы из GitHub Packages
images:
  - name: axis/goal
    newName: ghcr.io/annarav/axis-goal
    newTag: latest
  - name: axis/media
    newName: ghcr.io/annarav/axis-media
    newTag: latest
  - name: axis/notification
    newName: ghcr.io/annarav/axis-notification
    newTag: latest

labels:
  - pairs:
      environment: prod
      build-type: native