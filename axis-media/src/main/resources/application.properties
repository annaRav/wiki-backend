quarkus.application.name=axis-media
quarkus.http.port=8083

# CORS Configuration - disabled (handled by Gateway)
quarkus.http.cors.enabled=false

# MongoDB
quarkus.mongodb.connection-string=${MONGODB_URI:mongodb://mongodb:27017/axis_media}
quarkus.mongodb.database=${MONGODB_DATABASE:axis_media}

# OIDC / Keycloak - Resource Server mode (validates Bearer tokens)
# Gets JWKS directly from Keycloak inside cluster, ignores issuer mismatch for dev
quarkus.oidc.auth-server-url=http://keycloak:8080/realms/axis
quarkus.oidc.client-id=axis-backend
quarkus.oidc.credentials.secret=${KEYCLOAK_CLIENT_SECRET:secret}
quarkus.oidc.application-type=service
quarkus.oidc.discovery-enabled=true
quarkus.oidc.token.issuer=any

# Security
quarkus.http.auth.permission.public.paths=/q/*
quarkus.http.auth.permission.public.policy=permit
quarkus.http.auth.permission.options.paths=/api/*
quarkus.http.auth.permission.options.policy=permit
quarkus.http.auth.permission.options.methods=OPTIONS
quarkus.http.auth.permission.authenticated.paths=/api/*
quarkus.http.auth.permission.authenticated.policy=authenticated

# Health probes (match K8s expectations)
quarkus.smallrye-health.root-path=/actuator/health
quarkus.smallrye-health.liveness-path=liveness
quarkus.smallrye-health.readiness-path=readiness

# OpenAPI
quarkus.smallrye-openapi.path=/api-docs
quarkus.swagger-ui.path=/swagger-ui
quarkus.swagger-ui.always-include=true

# File upload
quarkus.http.body.uploads-directory=${java.io.tmpdir}/uploads
quarkus.http.limits.max-body-size=50M

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.axis".level=DEBUG
quarkus.log.category."io.quarkus.mongodb".level=DEBUG
